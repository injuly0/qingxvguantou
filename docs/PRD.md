
# MoodFlow 产品需求文档 (PRD)

## 1. 项目概述
**项目名称**: MoodFlow
**核心理念**: 结合沉浸式视觉体验与积极心理学（VIA 24项性格力量）的情绪记录工具。
**主要功能**: 用户通过沉浸式的场景卡片选择心情，通过引导式流程记录当下，并结合内在力量进行自我赋能。

## 2. 页面架构 (App Structure)

应用采用 **三段式水平页面 (3 Type Pages)** 布局，通过左右滑动或点击切换：

*   **左页 (Type Page 1)**: 个人档案/力量概览 (Profile - 待定)。
*   **中页 (Type Page 2 - Main)**: 情绪入口与记录 (Module A & C)。用户在此选择心情并完成记录流程。
*   **右页 (Type Page 3)**: 信念树与日记展示 (Module E)。展示所有过往的记忆结晶。

## 3. 核心模块划分

### 模块 A: 情绪入口 (Landing & Selection)
*   **位置**: 中页 (Main Page)。
*   **功能**: 全屏垂直滚动切换 Euphoric (摩天轮) / Stable (公路) / Depressed (深海)。点击进入输入流程。

### 模块 B: 力量核心 (Power Core)
*   **功能**: 选择 VIA 性格力量。

### 模块 C: 积极记录流程 (Input & Crystallization)
*   **适用模式**: Euphoric / Stable。
*   **流程**: 捕捉 -> 归因 -> 链接 -> 预览 -> 结晶。
*   **结晶**: 最终生成一颗水晶球注入树中。

### 模块 F: 心理实验室 (The Resilience Lab)
*   **适用模式**: Depressed (深海)。
*   **核心理念**: 基于积极心理学 ABCDE 模型 (Adversity, Belief, Consequence, Disputation, Energization) 进行认知重构。
*   **UI组件**: **心理学解码 (Psycho-Decode)**。在关键步骤展示“脑神经”图标，点击可查看该步骤背后的心理学原理（如CBT现实检验、时间抽离法等）。
*   **详细流程**:
    1.  **Adversity (逆境样本采集 - 摄像机视角)**
        *   **交互**: 仅限文字输入（**移除图片上传**，避免视觉反刍）。
        *   **引导**: “如果不使用形容词，摄像机拍到了什么？”
        *   **Placeholder**: “例如：不是‘他无情地拒绝了我’，而是‘他说现在不方便’。”
        *   **原理**: 现实检验 (Reality Testing)。剥离情绪化叙事，回归客观事实，调动前额叶皮层。
    2.  **Permanence (永久性破解 - 时光卷轴)**
        *   **交互**: 横向无限卷轴 (Infinite Scroll)。
        *   **视觉反馈**: 显示**具体的未来日期**（算法自动计算 Today -> +1 Week -> +1 Month...）。
        *   **动态追问**:
            *   Now (今天): “它现在看起来像一块巨石吗？” (清晰)
            *   +1 Week (具体日期): “下周的今天，这件事还会刺痛你吗？” (微透明)
            *   +1 Month (具体日期): “下个月的这一天，它会影响你吃早餐的心情吗？” (模糊)
            *   +1 Year (具体日期): “一年后的今天，这件事会改变你的人生轨迹吗？” (缩小)
            *   +10 Years (具体日期): “十年后回望，这只是你漫长人生故事里的一行注脚。” (尘埃化)
        *   **原理**: 时间抽离 (Temporal Distancing)。
    3.  **Pervasiveness (普遍性破解 - Life Pizza)**
        *   **交互**: 展示6个生活切片（健康、家庭、工作、社交、爱好、自我）。
        *   **操作**: 用户点击受影响的区域，该区域变灰。未被点击的区域保持发光。
        *   **隐喻**: “烦恼只是生活的一个切面，它没有污染我的全部生活。”
    4.  **Personalization (个人化破解 - Responsibility Pie)**
        *   **交互**: 显示“我的责任”圆饼图。提供外部因素按钮（运气、环境、他人、不可抗力）。
        *   **操作**: 添加外部因素，减少自我归因比例。
        *   **隐喻**: “客观归因，卸下不属于自己的心理重担。”
    5.  **Energization (能量转化)**
        *   **交互**: 系统生成认知重构语（Insight）。
        *   **操作**: 用户确认或修改，作为最终的心理结晶。
    6.  **Burial (埋葬仪式)**
        *   **视觉**: 生成一颗深褐色的“琥珀”。
        *   **动画**: 琥珀向下坠落，埋入信念树底部的土壤中。
        *   **隐喻**: “痛苦已转化为成长的养分，滋养根系。”

### 模块 E: 信念树 (Belief Tree)
*   **位置**: 右页 (Right Page)。
*   **设计哲学**: "树是骨架，记忆是果实"。
    *   **排序逻辑**: **高能量记忆置顶**。水晶球被点击（充能）次数越多，挂的位置越高。
*   **物体类型**:
    *   **水晶球 (Crystal Balls)**: 挂在树枝上，代表积极记忆。
    *   **琥珀 (Ambers)**: 埋在树根土壤里，代表转化后的消极情绪（养分）。
*   **成长系统**: Lv.1 萌芽 -> Lv.2 小树 -> Lv.3 繁茂光之树。

## 4. 数据结构
*   新增 `clickCount` 字段于 `MoodEntry`，用于决定树上挂载高度。
*   新增 `isAmber` 字段于 `CrystalVisuals`，区分水晶球与琥珀。
